import os
import telebot
from telebot import types

BOT_TOKEN = os.getenv('BOT_TOKEN')
bot = telebot.TeleBot(BOT_TOKEN)

CHANNEL_USERNAME = "@kazhbeen"
FILE_ID = "AAMCBAADGQEB_HEGaCEF0HNKoc_76phrXDLzY9zk7AkAAsEaAAJzrQlRx5bWp9p-DVwBAAdtAAM2BA"

@bot.message_handler(commands=['start'])
def start(message):
    user_id = message.chat.id
    try:
        member = bot.get_chat_member(CHANNEL_USERNAME, user_id)
        if member.status in ["member", "administrator", "creator"]:
            bot.send_message(user_id, "âœ… Ø´Ù…Ø§ Ø¹Ø¶Ùˆ Ú©Ø§Ù†Ø§Ù„ Ù‡Ø³ØªÛŒØ¯. ÙØ§ÛŒÙ„ Ø¢Ù…ÙˆØ²Ø´ Ø¨Ø±Ø§ÛŒ Ø´Ù…Ø§ Ø§Ø±Ø³Ø§Ù„ Ù…ÛŒâ€ŒØ´ÙˆØ¯.")
            bot.send_document(user_id, FILE_ID)
        else:
            send_join_message(user_id)
    except:
        send_join_message(user_id)

def send_join_message(user_id):
    markup = types.InlineKeyboardMarkup()
    join_btn = types.InlineKeyboardButton("Ø¹Ø¶ÙˆÛŒØª Ø¯Ø± Ú©Ø§Ù†Ø§Ù„ Ú©Ú˜Ø¨ÛŒÙ†", url="https://t.me/kazhbeen")
    check_btn = types.InlineKeyboardButton("Ø¨Ø±Ø±Ø³ÛŒ Ø¹Ø¶ÙˆÛŒØª âœ…", callback_data="check")
    markup.add(join_btn)
    markup.add(check_btn)
    bot.send_message(user_id, "Ø³Ù„Ø§Ù… Ø¨Ù‡ Ú©Ú˜Ø¨Ø§Øª Ø®ÙˆØ´ Ø§ÙˆÙ…Ø¯ÛŒØ¯ ğŸŒŸ\nØ¨Ø±Ø§ÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ø¨Ø§Øª Ù„Ø·ÙØ§ Ø¯Ø± Ú†Ù†Ù„ Ú©Ú˜Ø¨ÛŒÙ† Ø¹Ø¶Ùˆ Ø¨Ø´ÛŒØ¯ ğŸ‘‡", reply_markup=markup)

@bot.callback_query_handler(func=lambda call: call.data == "check")
def check_membership(call):
    user_id = call.from_user.id
    try:
        member = bot.get_chat_member(CHANNEL_USERNAME, user_id)
        if member.status in ["member", "administrator", "creator"]:
            bot.send_message(user_id, "âœ… Ø¹Ø¶ÙˆÛŒØª ØªØ§ÛŒÛŒØ¯ Ø´Ø¯. ÙØ§ÛŒÙ„ Ø¢Ù…ÙˆØ²Ø´ Ø¨Ø±Ø§ÛŒ Ø´Ù…Ø§ Ø§Ø±Ø³Ø§Ù„ Ù…ÛŒâ€ŒØ´ÙˆØ¯.")
            bot.send_document(user_id, FILE_ID)
        else:
     
